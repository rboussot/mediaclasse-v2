<div class="lecture-wrapper">
  <div class="container">
    <div class= "row">
      <!-- ========== BORDER COLOR ========== -->
      <div class="hidden-xs border <%= @lecture_course.category.tag %>"></div>
      <!-- ========== CHECKBOX ========== -->
      <% if current_user %>
        <div class= "sidebar-like checkbox" id="like-<%= @lecture_course.id %>">
          <%= render '/courses/like', course: @lecture_course %>
        </div>
      <% end %>
      <!-- ========== SIDE MENU ========== -->
      <div class= "col-xs-12 col-sm-12 col-md-3">
        <div class="lecture-menu">
          <% @lectures.each do |lecture| %>
            <ul>
              <%= link_to lecture_path(lecture) do %>
                <% if lecture.id.to_s == params[:id]%>
                  <li class="lecture-link active"><%= lecture.title %></li>
                <% else %>
                  <li class="lecture-link"><%= lecture.title %></li>
                <% end %>
              <% end %>
            </ul>
          <% end %>
        </div>
      </div>
      <!-- ========== VIDEO PAGE ========== -->
      <div class= "col-xs-12 col-md-9">
        <div class="lecture-show">
          <!-- ========== VIDEO EMBED ========== -->
          <% if policy(@lecture).watch_video? %>
              <%= render 'shared/embedvideo' %>
          <% else %>
            <%= render 'shared/planmodal' %>
            <div data-toggle = "modal" data-target = "#PlanModal" class="lecture-vignette">
              <%= cl_image_tag @lecture.course.picture, class: "lecture-cover" %>
              <%= image_tag ("lecture-icon.png"), class: "lecture-icon" %>
              <h2 class= "lecture-title"><%= @lecture.title %></h2>
              <p class="lecture-note">
                <i>Video réservée aux abonnés </i>
                <i class="fa fa-star" aria-hidden="true"></i>
              </p>
            </div>
          <% end %>
          <!-- ========== TABS ========== -->
          <div class= "tabs">
            <span class="tab active tab-description <%= @lecture_course.category.tag %>" href="#">
              <h3>Description</h3>
            </span>
            <span class="tab tab-documents <%= @lecture_course.category.tag %>" href="#">
              <h3>Documents</h3>
            </span>
            <span class="tab tab-discussion <%= @lecture_course.category.tag %>" href="#">
              <h3>Discussion</h3>
            </span>
          </div>
          <!-- ========== TAB CONTENT ========== -->
          <div class="lecture-content">
            <!-- === DESCRIPTION === -->
            <p class="lecture-description content"><%= @lecture.description %></p>
            <!-- === DOCUMENTS === -->
            <div class="lecture-documents content">
              <% if policy(@lecture).watch_video? && @documents %>
                <ul>
                  <% @documents.each do |document| %>
                    <li class="hvr-icon-grow">
                      <%= link_to document.title, document_path(document)%>
                    </li>
                  <% end %>
                </ul>
              <% elsif @documents %>
                <%= render 'shared/planmodal' %>
                <% @documents.each do |document| %>
                  <ul>
                    <li data-toggle = "modal" data-target = "#PlanModal" class="hvr-icon-grow">
                      <%= document.title %>
                    </li>
                  </ul>
                <% end %>
              <% else %>
                <h4>Aucun document pour l'instant !</h4>
                Mais n'hésitez pas à me suggérer par email ce qui pourrait vous aider : mediaclasse.fr@gmail.com
              <% end %>
            </div>
            <!-- === COMMENTS PARTIAL === -->
            <div id="lecture-comments">
              <%= render 'comments' %>
            </div>
            <!-- ========== CLOSE TABS ========== -->
          </div>
    <!-- ========== CLOSE CONTAINERS ========== -->
        </div>
      </div>
    </div>
  </div>
</div>
<!-- ========== JS ACTION ON TABS ========== -->
<% content_for(:js) do %>
  <%= javascript_tag do %>
    $(document).ready(function() {
      $('.tab-description').on('click', function(event) {
        $(".content").hide();
        $(".lecture-description").show();
        $(".tab").removeClass('active');
        $(this).addClass('active');
      });
      $('.tab-documents').on('click', function(event) {
        $(".content").hide();
        $(".lecture-documents").show();
        $(".tab").removeClass('active');
        $(this).addClass('active');
      });
      $('.tab-discussion').on('click', function(event) {
        $(".content").hide();
        $(".lecture-discussion").show();
        $(".tab").removeClass('active');
        $(this).addClass('active');
      });
    });
  <% end %>
<% end %>
